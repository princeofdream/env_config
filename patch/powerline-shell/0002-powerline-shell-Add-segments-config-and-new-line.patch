From 01e84da8ac20832a3e0b8f1c19ed958b78677eab Mon Sep 17 00:00:00 2001
From: James <howpigcanfly@outlook.com>
Date: Sun, 6 Aug 2017 19:41:22 +0800
Subject: [PATCH 2/3] [powerline-shell] Add segments config and new line

---
 config.py.dist          | 20 +++++++++++++++-----
 install.py              |  8 +++++++-
 powerline_shell_base.py |  1 +
 3 files changed, 23 insertions(+), 6 deletions(-)

diff --git a/config.py.dist b/config.py.dist
index 2affa3e..fba75c1 100644
--- a/config.py.dist
+++ b/config.py.dist
@@ -16,12 +16,12 @@ SEGMENTS = [
 # Show current ruby environment (see http://rbenv.org/)
 #   'rbenv',
 
-# Show the current user's username as in ordinary prompts
-    'username',
-
 # Show the machine's hostname. Mostly used when ssh-ing into other machines
     'hostname',
 
+# Show the current user's username as in ordinary prompts
+    'username',
+
 # Show a padlock when ssh-ing from another machine
     'ssh',
 
@@ -29,12 +29,19 @@ SEGMENTS = [
 # replaced with ellipsis ('...')
     'cwd',
 
+# Shows a '#' if the current user is root, '$' otherwise
+# Also, changes color if the last command exited with a non-zero error code
+    'root',
+
 # Show a padlock if the current user has no write access to the current
 # directory
     'read_only',
 
 # Show the current git branch and status
-    'git',
+	# 'git',
+	# 'git_ext',
+	'android_prj',
+	'git_branch',
 
 # Show the current mercurial branch and status
     'hg',
@@ -51,12 +58,15 @@ SEGMENTS = [
 # Show the last command's exit code if it was non-zero
 #    'exit_code',
 
+# Add new line in command window
+    'idle',
+
 # Adds a line break
 #    'newline',
 
 # Shows a '#' if the current user is root, '$' otherwise
 # Also, changes color if the last command exited with a non-zero error code
-    'root',
+    # 'root',
 ]
 
 # Change the colors used to draw individual segments in your prompt
diff --git a/install.py b/install.py
index bf36f41..e44bb1b 100755
--- a/install.py
+++ b/install.py
@@ -35,9 +35,15 @@ if __name__ == "__main__":
 
         # assumes each segment file will have a function called
         # add_segment__[segment] that accepts the powerline object
-        source += 'add_{}_segment(powerline)\n'.format(segment)
+        if cmp(segment,"idle") == 0:
+            source += 'add_{}_segment(powerline_newline)\n'.format(segment)
+        else:
+            source += 'add_{}_segment(powerline)\n'.format(segment)
 
+    source += '\n'
     source += 'sys.stdout.write(powerline.draw())\n'
+    source += 'sys.stdout.write(\"\\n\")\n'
+    source += 'sys.stdout.write(powerline_newline.draw())\n'
 
     try:
         open(OUTPUT_FILE, 'w').write(source)
diff --git a/powerline_shell_base.py b/powerline_shell_base.py
index 5d367a5..6abc498 100755
--- a/powerline_shell_base.py
+++ b/powerline_shell_base.py
@@ -209,3 +209,4 @@ if __name__ == "__main__":
     args = arg_parser.parse_args()
 
     powerline = Powerline(args, get_valid_cwd())
+    powerline_newline = Powerline(args, get_valid_cwd())
-- 
1.8.3.1


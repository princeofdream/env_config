From aeacdf1b9ab2f2a0070849d293d657aa52ca4578 Mon Sep 17 00:00:00 2001
From: "jin.li" <jin.li@nufront.com>
Date: Sun, 16 Jul 2017 23:21:34 +0800
Subject: [PATCH] [powerline-shell] Add newline segment

---
 install.py              |  8 +++++++-
 powerline_shell_base.py |  1 +
 segments/idle.py        | 12 ++++++------
 3 files changed, 14 insertions(+), 7 deletions(-)

diff --git a/install.py b/install.py
index bf36f41..e44bb1b 100755
--- a/install.py
+++ b/install.py
@@ -35,9 +35,15 @@ if __name__ == "__main__":
 
         # assumes each segment file will have a function called
         # add_segment__[segment] that accepts the powerline object
-        source += 'add_{}_segment(powerline)\n'.format(segment)
+        if cmp(segment,"idle") == 0:
+            source += 'add_{}_segment(powerline_newline)\n'.format(segment)
+        else:
+            source += 'add_{}_segment(powerline)\n'.format(segment)
 
+    source += '\n'
     source += 'sys.stdout.write(powerline.draw())\n'
+    source += 'sys.stdout.write(\"\\n\")\n'
+    source += 'sys.stdout.write(powerline_newline.draw())\n'
 
     try:
         open(OUTPUT_FILE, 'w').write(source)
diff --git a/powerline_shell_base.py b/powerline_shell_base.py
index 5d367a5..6abc498 100755
--- a/powerline_shell_base.py
+++ b/powerline_shell_base.py
@@ -209,3 +209,4 @@ if __name__ == "__main__":
     args = arg_parser.parse_args()
 
     powerline = Powerline(args, get_valid_cwd())
+    powerline_newline = Powerline(args, get_valid_cwd())
diff --git a/segments/idle.py b/segments/idle.py
index 49c429e..523fece 100644
--- a/segments/idle.py
+++ b/segments/idle.py
@@ -1,11 +1,11 @@
 def add_idle_segment(powerline):
-    idle_indicators = {
-        'bash': '\n ',
-        'zsh': ' \n ',
-        'bare': ' \n ',
-    }
+    #  idle_indicators = {
+        #  'bash': '\n ',
+        #  'zsh': ' \n ',
+        #  'bare': ' \n ',
+    #  }
     #  fg = Color.CMD_LINE_FG
     #  bg = Color.CMD_LINE_BG
     fg = Color.HOME_BG
     bg = Color.HOME_FG
-    powerline.append(idle_indicators[powerline.args.shell], fg, bg)
+    powerline.append("", fg, bg)
-- 
1.8.3.1

